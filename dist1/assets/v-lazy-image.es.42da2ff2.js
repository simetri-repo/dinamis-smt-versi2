import{k as P,l as w,m as v,p as j,q as h,s as b}from"./vendor.f8aca5d7.js";var I=Object.defineProperty,S=Object.defineProperties,q=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,O=(e,o,a)=>o in e?I(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,E={props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:,"},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},inheritAttrs:!1,setup(e,{attrs:o,slots:a,emit:i}){const n=P(null),r=w({observer:null,intersected:!1,loaded:!1}),f=v(()=>r.intersected&&e.src?e.src:e.srcPlaceholder),m=v(()=>!(!r.intersected||!e.srcset)&&e.srcset),d=()=>{n.value.getAttribute("src")!==e.srcPlaceholder&&(r.loaded=!0,i("load"))},g=()=>i("error",n.value);return j(()=>{"IntersectionObserver"in window&&(r.observer=new IntersectionObserver(c=>{c[0].isIntersecting&&(r.intersected=!0,r.observer.disconnect(),i("intersect"))},e.intersectionOptions),r.observer.observe(n.value))}),h(()=>{"IntersectionObserver"in window&&r.observer.disconnect()}),()=>{const c=b("img",(u=((l,t)=>{for(var s in t||(t={}))z.call(t,s)&&O(l,s,t[s]);if(y)for(var s of y(t))A.call(t,s)&&O(l,s,t[s]);return l})({ref:n,src:f.value,srcset:m.value||null},o),p={class:[o.class,"v-lazy-image",{"v-lazy-image-loaded":r.loaded}],onLoad:d,onError:g},S(u,q(p))));var u,p;return e.usePicture?b("picture",{ref:n,onLoad:d},r.intersected?[a.default,c]:[c]):c}}};export{E as v};
